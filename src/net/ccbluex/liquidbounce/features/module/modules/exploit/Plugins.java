/*    */ package net.ccbluex.liquidbounce.features.module.modules.exploit;
/*    */ 
/*    */ import java.util.ArrayList;
/*    */ import java.util.Collections;
/*    */ import java.util.List;
/*    */ import joptsimple.internal.Strings;
/*    */ import net.ccbluex.liquidbounce.api.minecraft.network.play.server.ISPacketTabComplete;
/*    */ import net.ccbluex.liquidbounce.event.EventTarget;
/*    */ import net.ccbluex.liquidbounce.event.PacketEvent;
/*    */ import net.ccbluex.liquidbounce.event.UpdateEvent;
/*    */ import net.ccbluex.liquidbounce.features.module.Module;
/*    */ import net.ccbluex.liquidbounce.features.module.ModuleCategory;
/*    */ import net.ccbluex.liquidbounce.features.module.ModuleInfo;
/*    */ import net.ccbluex.liquidbounce.utils.ClientUtils;
/*    */ import net.ccbluex.liquidbounce.utils.timer.TickTimer;
/*    */ 
/*    */ @ModuleInfo(name = "Plugins", description = "Allows you to see which plugins the server is using.", category = ModuleCategory.EXPLOIT)
/*    */ public class Plugins
/*    */   extends Module
/*    */ {
/* 21 */   private final TickTimer tickTimer = new TickTimer();
/*    */ 
/*    */   
/*    */   public void onEnable() {
/* 25 */     if (mc.getThePlayer() == null) {
/*    */       return;
/*    */     }
/* 28 */     mc.getNetHandler().addToSendQueue(classProvider.createCPacketTabComplete("/"));
/* 29 */     this.tickTimer.reset();
/*    */   }
/*    */   
/*    */   @EventTarget
/*    */   public void onUpdate(UpdateEvent event) {
/* 34 */     this.tickTimer.update();
/*    */     
/* 36 */     if (this.tickTimer.hasTimePassed(20)) {
/* 37 */       ClientUtils.displayChatMessage("§cPlugins check timed out...");
/* 38 */       this.tickTimer.reset();
/* 39 */       setState(false);
/*    */     } 
/*    */   }
/*    */   
/*    */   @EventTarget
/*    */   public void onPacket(PacketEvent event) {
/* 45 */     if (classProvider.isSPacketTabComplete(event.getPacket())) {
/* 46 */       ISPacketTabComplete s3APacketTabComplete = event.getPacket().asSPacketTabComplete();
/*    */       
/* 48 */       List<String> plugins = new ArrayList<>();
/* 49 */       String[] commands = s3APacketTabComplete.getCompletions();
/*    */       
/* 51 */       for (String command1 : commands) {
/* 52 */         String[] command = command1.split(":");
/*    */         
/* 54 */         if (command.length > 1) {
/* 55 */           String pluginName = command[0].replace("/", "");
/*    */           
/* 57 */           if (!plugins.contains(pluginName)) {
/* 58 */             plugins.add(pluginName);
/*    */           }
/*    */         } 
/*    */       } 
/* 62 */       Collections.sort(plugins);
/*    */       
/* 64 */       if (!plugins.isEmpty()) {
/* 65 */         ClientUtils.displayChatMessage("§aPlugins §7(§8" + plugins.size() + "§7): §c" + Strings.join(plugins.<String>toArray(new String[0]), "§7, §c"));
/*    */       } else {
/* 67 */         ClientUtils.displayChatMessage("§cNo plugins found.");
/* 68 */       }  setState(false);
/* 69 */       this.tickTimer.reset();
/*    */     } 
/*    */   }
/*    */ }


/* Location:              C:\Users\Administrator\Desktop\XSJ Client v2.3 New Year's Special Edition.jar!\net\ccbluex\liquidbounce\features\module\modules\exploit\Plugins.class
 * Java compiler version: 8 (52.0)
 * JD-Core Version:       1.1.3
 */